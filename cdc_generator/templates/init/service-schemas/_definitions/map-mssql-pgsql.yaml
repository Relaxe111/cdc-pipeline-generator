# Type compatibility map from MSSQL source types to PostgreSQL sink types.
#
# File naming is directional and canonical:
#   map-{source}-{sink}.yaml
#
# Rules:
# - mappings: exact source_type -> sink_type mapping
# - compatibility: optional broader castability (source_type -> [sink_types...])
# - compatibility "*": universal castable sink targets (for example text-like)

metadata:
  version: 1

aliases:
  source:
    integer: int
  sink:
    int2: smallint
    int4: integer
    int8: bigint
    decimal: numeric
    bool: boolean
    varchar: character varying
    char: character
    timestamptz: timestamp with time zone
    timestamp: timestamp without time zone
    float8: double precision
    float4: real

mappings:
  bigint: bigint
  int: integer
  smallint: smallint
  tinyint: smallint
  bit: boolean
  decimal: numeric
  numeric: numeric
  money: numeric
  smallmoney: numeric
  float: double precision
  real: real
  date: date
  datetime: timestamp without time zone
  datetime2: timestamp without time zone
  smalldatetime: timestamp without time zone
  datetimeoffset: timestamp with time zone
  time: time without time zone
  char: character
  nchar: character
  varchar: character varying
  nvarchar: character varying
  text: text
  ntext: text
  binary: bytea
  varbinary: bytea
  image: bytea
  rowversion: bytea
  timestamp: bytea
  uniqueidentifier: uuid
  xml: xml
  json: jsonb
  sql_variant: jsonb
  geography: text
  geometry: text

compatibility:
  "*":
  - text
  - character varying
  - character
  tinyint:
  - smallint
  - integer
  - bigint
  - numeric
  - real
  - double precision
  int:
  - integer
  - bigint
  - numeric
  - real
  - double precision
  smallint:
  - smallint
  - integer
  - bigint
  - numeric
  - real
  - double precision
  bigint:
  - bigint
  - numeric
  - real
  - double precision
  decimal:
  - numeric
  - real
  - double precision
  numeric:
  - numeric
  - real
  - double precision
  real:
  - real
  - double precision
  datetime:
  - timestamp without time zone
  - timestamp with time zone
  datetime2:
  - timestamp without time zone
  - timestamp with time zone
  smalldatetime:
  - timestamp without time zone
  - timestamp with time zone
  date:
  - date
  - timestamp without time zone
  - timestamp with time zone
