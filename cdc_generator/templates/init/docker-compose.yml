services:
  dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    volumes:
      - .:/workspace
      - ~/.ssh:/root/.ssh:ro
      - ~/.gitconfig:/root/.gitconfig:ro
    environment:
      PYTHONPATH: /workspace
    working_dir: /workspace
    stdin_open: true
    tty: true
    command: fish
    # Database services will be added here when you run:
    # cdc manage-server-group --create <name> --pattern <type> --source-type <db-type>
    # depends_on:
    #   - mssql
    #   - postgres-target

  # Database services will be auto-generated by 'cdc manage-server-group --create'
  # Example services that will be added:
  #
  # mssql:
  #   image: mcr.microsoft.com/mssql/server:2022-latest
  #   environment:
  #     ACCEPT_EULA: Y
  #     SA_PASSWORD: ${MSSQL_PASSWORD}
  #     MSSQL_PID: Developer
  #   ports:
  #     - ${MSSQL_PORT:-1433}:1433
  #   volumes:
  #     - mssql-data:/var/opt/mssql
  #
  # postgres-target:
  #   image: postgres:15-alpine
  #   environment:
  #     POSTGRES_USER: ${POSTGRES_TARGET_USER:-postgres}
  #     POSTGRES_PASSWORD: ${POSTGRES_TARGET_PASSWORD}
  #     POSTGRES_DB: ${POSTGRES_TARGET_DB:-cdc_target}
  #   ports:
  #     - ${POSTGRES_TARGET_PORT:-5432}:5432
  #   volumes:
  #     - postgres-target-data:/var/lib/postgresql/data

# Volumes will be auto-generated by 'cdc manage-server-group --create'
# volumes:
#   mssql-data:
#   postgres-target-data:

